# Vocab & Posting Lists

## 词条、词项的概念理解

1. **词条(Token)** – 词或者词项在文档中出现的字符串实例，出现多次算多个词条
2. 词条经过一些处理(去除停用词、归一化)之后放入倒排索引中，最后用于索引的称为**词项(Term)**
3. 词项实际上是一系列词条组成的**等价类**

## 归一化，建立索引抽取词项过程中的重要手段

归一化：词条归一化(Normalization)的结果就是词项，而词项就是我们最终要索引的对象

### 除了归一化以外，还有非对称扩展

一个例子：输入 windows 搜索 Windows, windows, window

## 快速倒排表合并-跳表法

### 普通合并

![2-list-merge](..\static\2-list-merge.png)

**合并时间为两个表长之和的线性时间O(X+Y)**

### 跳表指针合并

核心思想：在排序的序列中跳过不可能的检索结果

<img src="..\static\2-jmplist.png" alt="2-jmplist" style="zoom:50%;" />

关于跳表指针的位置

<img src="..\static\2-ptjmp.png" alt="2-ptjmp" style="zoom:33%;" />

**指针数目过多过少都不合适**

1. 指针多->跳步距离短->更容易跳转，但需要更多次比较
2. 指针少->比较次数少，但是跳步距离长->成功跳转次数少



## 短语查询，为了实现短语查询该如何组织词典

短语查询：输入查询作为一个短语整体

1. 双词(Biword)索引（可以和其他方法混合使用）
   1. 每两个连续的词组成词对(作为短语)来索引
   2. 比如文本片段“Friends, Romans, Countrymen”会产生两个词对
      1. friends romans
      2. romans countrymen
   3. 索引构建时，将每个词对看成一个词项放到词典中，两个词组成的短语查询就能直接处理
   4. 双词索引的问题：
      1. 出现伪正例
      2. 词典中词项数目剧增，导致索引空间激增，如果3词索引，那么更是空间巨大
2. 带位置信息索引
   1. 在倒排记录表中，对每个term在每篇文档中的每个位置(偏移或者单词序号)进行存储:
      1. <term, 出现term的文档篇数；
      2. – doc1: 位置1, 位置2 … ;
      3. – doc2: 位置1, 位置2 … ;
      4. – ...>
   2. 对于输入的短语查询，需要在文档的层次上进行迭代(不同位置上)合并
3. 混合索引：上述两种索引方式可以混合使用

## 位置信息检索

基于位置信息索引，能够处理短语查询(phrase query)，也能处理邻近式查询(proximity query)